---
title: 'Memo: Sustainability Science Citation Analysis'
author: "Wyatt Hurt"
date: "03/16/2020"
output:
  pdf_document: default
  html_document: default
---

As requested by Alicia Harley on March 11, this paper provides a broad-scope analysis of the citations in *Sustainability Science: Toward a Synthesis (Harvard Sustainability Science Program Working Paper 2019-01)*. I would be happy to expand upon any sections of this memo further, if it would be helpful. 
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(janitor)
library(gt)
library(tidyr)
library(rorcid)
library(wordcloud2)
library(tm)
library(bibliometrix)
library(tidyverse)
library(dplyr)
```

```{r bibliometrix_setup, include = FALSE}
# extracted_citations_doi <- bib2df("raw_data/wos_exports_from_doi_search_long.bib") %>%
  # clean_names()

D <- readFiles("raw_data/wos_exports_from_doi_search_long.bib")
M <- convert2df(D, dbsource = "wos", format = "bibtex")
results <- biblioAnalysis(M, sep = ";")
# options(width=100)
# S <- summary(object = results, k = 10, pause = FALSE)
# plot(x = results, k = 10, pause = FALSE)
```

## Method
I used a [REF extractor script](https://rintze.zelle.me/ref-extractor/) to extract the Zotero citations from the paper's .docx file. Then, I extracted the DOIs from this file and imported them into Web of Science, creating a marked list, which I exported to a .bib file. From there, I read the .bib file into R and analyzed it using the [bibliometrix() package](https://www.bibliometrix.org/). 

The original paper cites 420 articles, 246 of which had DOIs assigned within our shared sust_sci Zotero. This memo only analyzes the 246 articles which had DOIs assigned. I would be happy to manually assign DOIs to the appropriate Zotero articles and re-run the analysis script, if that would be helpful. 

## Authors
The table below lists all authors cited more than once by the paper. This list includes all authors listed on all citations (not just first or second authors).
```{r authors}
authors <- enframe(results$Authors)

authors %>%
  rename(author_ct = value) %>%
  filter(author_ct > 1) %>%
  gt() %>%
  cols_label(name = "Author Name", author_ct = "Times Cited") %>%
  tab_header(title = "Most Frequently Cited Authors") %>%
  tab_footnote(
    "All scholars cited more than 1 time are listed.", 
    cells_title(groups = c("title"))
    )
```

## Corresponding Author Geographies
Following standard bibliometric procedure, I use the corresponding author's "affiliated country" in Web of Science to assign a country ID to each citation. The table below lists all countries cited by the paper.
```{r countries, include = TRUE}

countries <- enframe(results$Countries)

countries %>%
  rename(country_ct = value) %>%
  gt() %>%
  cols_label(name = "Country", country_ct = "Times Cited") %>%
  tab_header(title = "Most Frequently Cited Countries")
```

## Corresponding Author Institutional Affiliations
Again following standard bibliometric procedure, I use the corresponding author's "affiliated institution" in Web of Science to assign an institutional ID to each citation. The table below lists all institutions cited by the paper. 
```{r affiliations, include=FALSE}

affiliations <- enframe(results$FirstAffiliation)

affiliations %>%
  group_by(value) %>%
  summarize(affiliation_ct = n()) %>%
  arrange(desc(affiliation_ct)) %>%
  gt() %>%
  cols_label(value = "Institution", affiliation_ct = "Times Cited") %>%
  tab_header(title = "Most Frequently Cited Institutions")
```


## Journals
The table below lists all journals cited more than once by the paper.
```{r journals, include=TRUE}

journals <- enframe(results$Sources)

journals %>%
  rename(journal_ct = value) %>%
  filter(journal_ct > 1) %>%
  gt() %>%
  cols_label(name = "Journal", journal_ct = "Times Cited") %>%
  tab_header(title = "Most Cited Journals")  %>%
  tab_footnote(
    "Note that Web of Science disaggregates ARER into its separate volumes. This can be corrected with a modification to the R script in future analyses.", 
    cells_title(groups = c("title"))
    )
```

## Citations
```{r citations, include=TRUE}

citations <- results[["MostCitedPapers"]] %>%
  clean_names()

citations %>%
  select(paper, tc) %>%
  arrange(desc(tc)) %>%
  filter(tc >= 50) %>%
  gt() %>%
  cols_label(paper = "Article", tc = "Cited Reference Count") %>%
  tab_header(title = "Citations' Most Frequently Cited References") %>%
  tab_footnote(
    "All cited references cited more than 50 times are listed.", 
    cells_title(groups = c("title")))
```
